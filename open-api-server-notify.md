# 服务端通知文档

## 通知规则说明
- 1、回调通知仅关注响应的http状态码是否等于200，不会使用任何响应体中的数据
- 1.1、响应http状态等于200，则认为回调成功，不会再触发回调
- 1.2、响应http状态不等于200，则认为回调失败，在依次间隔15s、15s、30s、3m、10m、20m、30m、30m、30m、60m、3h、3h、3h、6h、6h进行回调重试，总共回调15次。如果所有重试都不成功，则认为回调失败，不再触发回调。
- 2、回调接口应在5s内响应，否则此次回调则认为失败回调
- 3、对于多个回调通知有顺序要求的，仅在上一个回调成功后才会触发下一个回调，如果上一个回调失败，后续回调将都不会回调。

##  文档
旅拍开放平台 OPEN API 服务端通知文档

消息通知为json格式，包含以下字段

| 通知类型名   | 数据类型   | 说明                  |
|---------|--------|---------------------|
| type   | string | 当前通知类型              |
| data   | string | JSON字符串，当前通知类型的具体数据 |


**所有可用通知类型**

| 通知类型名   | 说明       |
|---------|----------|
| order   | 订单状态变更通知 |

**通知示例数据**

```json
{
"type":"order",
"data": "{\"id\":\"\",\"tradeNo\":\"\",\"outOrderId\":\"\",\"status\":\"\",\"qrCode\":\"http://xxxx/a/b\",\"storeId\":\"\"}"
}
```

-------

## 订单状态变更通知

通知数据结构

| 参数名        | 类型     | 说明     |
|------------|--------|--------|
| id         | string | 旅拍订单ID |
| tradeNo    | string | 业务订单号  |
| outOrderId | string | 外部订单号  |
| status     | string | 订单状态   |
| qrCode     | string | 订单二维码  |
| storeId    | string | 旅拍门店ID |

**通知数据示例**

```json
{
  "id": "",
  "tradeNo": "",
  "outOrderId": "",
  "status": "",
  "qrCode": "http://xxxx/a/b",
  "storeId": ""
}
```